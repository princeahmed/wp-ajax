/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./assets/js/frontend.js":
/*!*******************************!*\
  !*** ./assets/js/frontend.js ***!
  \*******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _preload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./preload */ "./assets/js/preload.js");


(function ($) {
  var app = {
    preload: "<div id=\"wp-ajax-preload\" style=\"position: fixed;width: 100%;height: 100%;background: rgba(0,0,0, .5);display: flex;align-items: center;justify-content: center;z-index: 9999;\"><img src=\"".concat(wpAjax.plugin_url, "/assets/images/preload.gif\" style=\"width: 100px;\"></div>"),
    init: function init() {
      app.hidePreload();
      $(document).on('click', 'a:not([href^="#"])', app.handleClick);
    },

    /**
     * handle the link click
     *
     * @param e
     */
    handleClick: function handleClick(e) {
      var url = $(this).attr('href');

      if (app.isExternal(this)) {
        return;
      } else {
        if (url.includes('/wp-admin/')) {
          return;
        }

        e.preventDefault();
      }

      app.getPage(url);
    },

    /**
     * get the page content by ajax request
     *
     * @param url
     * @param replaceURL
     */
    getPage: function getPage(url) {
      var replaceURL = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      app.showPreload();
      $.get(url, function (response) {
        response = response.replace(/(<[a-zA-Z]+>|.*?[^?]>)/, "$1 ".concat(app.preload));
        var newDoc = document.open("text/html", "replace");
        newDoc.write(response);
        newDoc.close();

        if (replaceURL) {
          app.replaceURL(url);
        }
      }).fail(function (error) {
        console.log(error);
        app.hidePreload();
        alert('Oops! AJAX Error');
      });
    },

    /**
     * Show ajax preloader image
     */
    showPreload: function showPreload() {
      if ($('#wp-ajax-preload', $(document)).length) {
        $('#wp-ajax-preload', $(document)).addClass('active');
      } else {
        $('body').prepend(app.preload);
      }
    },

    /**
     * hide ajax preloader image
     */
    hidePreload: function hidePreload() {
      $('#wp-ajax-preload').removeClass('active');
    },

    /**
     * check whether the link is external or not
     *
     * @param link
     * @returns {boolean}
     */
    isExternal: function isExternal(link) {
      return link.host !== window.location.host;
    },

    /**
     * replace browser url
     *
     * @param url
     */
    replaceURL: function replaceURL(url) {
      if (history.pushState) {
        var URL = url.replace(/^.*\/\/[^\/]+/, '');
        window.history.pushState('', '', URL);
      } else {
        document.location.href = url;
      }
    }
  };
  Object(_preload__WEBPACK_IMPORTED_MODULE_0__["default"])();
  app.hidePreload();
  $(document).ready(app.init);
  /**
   * handle browser back/ next navigation
   */

  onpopstate = function onpopstate() {
    var url = location.href;
    app.getPage(url, false);
  };
})(jQuery);

/***/ }),

/***/ "./assets/js/preload.js":
/*!******************************!*\
  !*** ./assets/js/preload.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
var wpAjaxPreload = function wpAjaxPreload() {
  var maxRPS = 3;
  var delay = 0;
  var hoverDelay = 50;
  var ignoreKeywords = ['/wp-admin', '/wp-login.php', '/cart', '/checkout', 'add-to-cart', 'logout', '#', '?', '.png', '.jpeg', '.jpg', '.gif', '.svg', '.webp'];
  var toPrefetch = new Set();
  var alreadyPrefetched = new Set(); // Check browser support for native 'prefetch'

  var prefetcher = document.createElement("link");
  var isSupported = prefetcher.relList && prefetcher.relList.supports && prefetcher.relList.supports("prefetch") && window.IntersectionObserver && "isIntersecting" in IntersectionObserverEntry.prototype; // Checks if user is on slow connection or has enabled data saver

  var isSlowConnection = navigator.connection && (navigator.connection.saveData || (navigator.connection.effectiveType || "").includes("2g")); // Don't start preloading if user is on a slow connection or not supported

  if (isSlowConnection || !isSupported) return; // Prefetch the given url using native 'prefetch'. Fallback to 'xhr' if not supported

  var prefetch = function prefetch(url) {
    return new Promise(function (resolve, reject) {
      var link = document.createElement("link");
      link.rel = "prefetch";
      link.href = url;
      link.onload = resolve;
      link.onerror = reject;
      document.head.appendChild(link);
    });
  }; // Prefetch pages with a timeout


  var prefetchWithTimeout = function prefetchWithTimeout(url) {
    var timer = setTimeout(function () {
      return stopPreloading();
    }, 5000);
    prefetch(url)["catch"](function () {
      return stopPreloading();
    })["finally"](function () {
      return clearTimeout(timer);
    });
  };

  var addUrlToQueue = function addUrlToQueue(url) {
    var processImmediately = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    if (alreadyPrefetched.has(url) || toPrefetch.has(url)) return; // Prevent preloading 3rd party domains

    var origin = window.location.origin;
    if (url.substring(0, origin.length) !== origin) return; // Prevent current page from preloading

    if (window.location.href === url) return; // Ignore keywords in the array, if matched to the url

    for (var i = 0; i < ignoreKeywords.length; i++) {
      if (url.includes(ignoreKeywords[i])) return;
    } // If max RPS is 0 or is on mouse hover, process immediately (without queue)


    if (processImmediately) {
      prefetchWithTimeout(url);
      alreadyPrefetched.add(url);
    } else toPrefetch.add(url);
  }; // Observe the links in viewport, add url to queue if found intersecting


  var linksObserver = new IntersectionObserver(function (entries) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        var url = entry.target.href;
        addUrlToQueue(url, !maxRPS);
      }
    });
  }); // Queue that process requests based on max RPS (requests per second)

  var startQueue = function startQueue() {
    return setInterval(function () {
      Array.from(toPrefetch).slice(0, maxRPS).forEach(function (url) {
        prefetchWithTimeout(url);
        alreadyPrefetched.add(url);
        toPrefetch["delete"](url);
      });
    }, 1000);
  };

  var hoverTimer = null; // Add URL to queue on mouse hover, after timeout

  var mouseOverListener = function mouseOverListener(event) {
    var elm = event.target.closest("a");

    if (elm && elm.href && !alreadyPrefetched.has(elm.href)) {
      hoverTimer = setTimeout(function () {
        addUrlToQueue(elm.href, true);
      }, hoverDelay);
    }
  }; // Preload on touchstart on mobile


  var touchStartListener = function touchStartListener(event) {
    var elm = event.target.closest("a");
    if (elm && elm.href && !alreadyPrefetched.has(elm.href)) addUrlToQueue(elm.href, true);
  }; // Clear timeout on mouse out if not already preloaded


  var mouseOutListener = function mouseOutListener(event) {
    var elm = event.target.closest("a");

    if (elm && elm.href && !alreadyPrefetched.has(elm.href)) {
      clearTimeout(hoverTimer);
    }
  }; // Fallback for requestIdleCallback https://caniuse.com/#search=requestIdleCallback


  var requestIdleCallback = window.requestIdleCallback || function (cb) {
    var start = Date.now();
    return setTimeout(function () {
      cb({
        didTimeout: false,
        timeRemaining: function timeRemaining() {
          return Math.max(0, 50 - (Date.now() - start));
        }
      });
    }, 1);
  }; // Stop preloading in case server is responding slow/errors


  var stopPreloading = function stopPreloading() {
    // Find all links are remove it from observer (viewport)
    document.querySelectorAll("a").forEach(function (e) {
      return linksObserver.unobserve(e);
    }); // Clear pending links in queue

    toPrefetch.clear(); // Remove event listeners for mouse hover and mobile touch

    document.removeEventListener("mouseover", mouseOverListener, true);
    document.removeEventListener("mouseout", mouseOutListener, true);
    document.removeEventListener("touchstart", touchStartListener, true);
  }; // Start Queue


  startQueue(); // Start preloading links in viewport on idle callback, with a delay

  requestIdleCallback(function () {
    return setTimeout(function () {
      return document.querySelectorAll("a").forEach(function (e) {
        return linksObserver.observe(e);
      });
    }, delay * 1000);
  }); // Add event listeners to detect mouse hover and mobile touch

  var listenerOptions = {
    capture: true,
    passive: true
  };
  document.addEventListener("mouseover", mouseOverListener, listenerOptions);
  document.addEventListener("mouseout", mouseOutListener, listenerOptions);
  document.addEventListener("touchstart", touchStartListener, listenerOptions);
};

/* harmony default export */ __webpack_exports__["default"] = (wpAjaxPreload);

/***/ }),

/***/ 0:
/*!*************************************!*\
  !*** multi ./assets/js/frontend.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! C:\xampp\htdocs\wp-ajax\wp-content\plugins\wp-ajax\assets\js\frontend.js */"./assets/js/frontend.js");


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2Zyb250ZW5kLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9wcmVsb2FkLmpzIl0sIm5hbWVzIjpbIiQiLCJhcHAiLCJwcmVsb2FkIiwid3BBamF4IiwicGx1Z2luX3VybCIsImluaXQiLCJoaWRlUHJlbG9hZCIsImRvY3VtZW50Iiwib24iLCJoYW5kbGVDbGljayIsImUiLCJ1cmwiLCJhdHRyIiwiaXNFeHRlcm5hbCIsImluY2x1ZGVzIiwicHJldmVudERlZmF1bHQiLCJnZXRQYWdlIiwicmVwbGFjZVVSTCIsInNob3dQcmVsb2FkIiwiZ2V0IiwicmVzcG9uc2UiLCJyZXBsYWNlIiwibmV3RG9jIiwib3BlbiIsIndyaXRlIiwiY2xvc2UiLCJmYWlsIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiYWxlcnQiLCJsZW5ndGgiLCJhZGRDbGFzcyIsInByZXBlbmQiLCJyZW1vdmVDbGFzcyIsImxpbmsiLCJob3N0Iiwid2luZG93IiwibG9jYXRpb24iLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiVVJMIiwiaHJlZiIsIndwQWpheFByZWxvYWQiLCJyZWFkeSIsIm9ucG9wc3RhdGUiLCJqUXVlcnkiLCJtYXhSUFMiLCJkZWxheSIsImhvdmVyRGVsYXkiLCJpZ25vcmVLZXl3b3JkcyIsInRvUHJlZmV0Y2giLCJTZXQiLCJhbHJlYWR5UHJlZmV0Y2hlZCIsInByZWZldGNoZXIiLCJjcmVhdGVFbGVtZW50IiwiaXNTdXBwb3J0ZWQiLCJyZWxMaXN0Iiwic3VwcG9ydHMiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyRW50cnkiLCJwcm90b3R5cGUiLCJpc1Nsb3dDb25uZWN0aW9uIiwibmF2aWdhdG9yIiwiY29ubmVjdGlvbiIsInNhdmVEYXRhIiwiZWZmZWN0aXZlVHlwZSIsInByZWZldGNoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWwiLCJvbmxvYWQiLCJvbmVycm9yIiwiaGVhZCIsImFwcGVuZENoaWxkIiwicHJlZmV0Y2hXaXRoVGltZW91dCIsInRpbWVyIiwic2V0VGltZW91dCIsInN0b3BQcmVsb2FkaW5nIiwiY2xlYXJUaW1lb3V0IiwiYWRkVXJsVG9RdWV1ZSIsInByb2Nlc3NJbW1lZGlhdGVseSIsImhhcyIsIm9yaWdpbiIsInN1YnN0cmluZyIsImkiLCJhZGQiLCJsaW5rc09ic2VydmVyIiwiZW50cmllcyIsImZvckVhY2giLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwidGFyZ2V0Iiwic3RhcnRRdWV1ZSIsInNldEludGVydmFsIiwiQXJyYXkiLCJmcm9tIiwic2xpY2UiLCJob3ZlclRpbWVyIiwibW91c2VPdmVyTGlzdGVuZXIiLCJldmVudCIsImVsbSIsImNsb3Nlc3QiLCJ0b3VjaFN0YXJ0TGlzdGVuZXIiLCJtb3VzZU91dExpc3RlbmVyIiwicmVxdWVzdElkbGVDYWxsYmFjayIsImNiIiwic3RhcnQiLCJEYXRlIiwibm93IiwiZGlkVGltZW91dCIsInRpbWVSZW1haW5pbmciLCJNYXRoIiwibWF4IiwicXVlcnlTZWxlY3RvckFsbCIsInVub2JzZXJ2ZSIsImNsZWFyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9ic2VydmUiLCJsaXN0ZW5lck9wdGlvbnMiLCJjYXB0dXJlIiwicGFzc2l2ZSIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiI7UUFBQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTs7O1FBR0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDBDQUEwQyxnQ0FBZ0M7UUFDMUU7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSx3REFBd0Qsa0JBQWtCO1FBQzFFO1FBQ0EsaURBQWlELGNBQWM7UUFDL0Q7O1FBRUE7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QUE2QixZQUE3QixFQUEyQ2Qsa0JBQTNDLEVBQStELElBQS9EO0FBQ0QsR0FYRCxDQXRJMEIsQ0FtSjFCOzs7QUFDQVYsWUFBVSxHQXBKZ0IsQ0FzSjFCOztBQUNBWSxxQkFBbUIsQ0FBQztBQUFBLFdBQ2xCNUIsVUFBVSxDQUFDO0FBQUEsYUFDUHZFLFFBQVEsQ0FBQzRHLGdCQUFULENBQTBCLEdBQTFCLEVBQStCekIsT0FBL0IsQ0FBdUMsVUFBQWhGLENBQUM7QUFBQSxlQUFJOEUsYUFBYSxDQUFDK0IsT0FBZCxDQUFzQjdHLENBQXRCLENBQUo7QUFBQSxPQUF4QyxDQURPO0FBQUEsS0FBRCxFQUNpRXNDLEtBQUssR0FBRyxJQUR6RSxDQURRO0FBQUEsR0FBRCxDQUFuQixDQXZKMEIsQ0E2SjFCOztBQUNBLE1BQU13RSxlQUFlLEdBQUc7QUFBQ0MsV0FBTyxFQUFFLElBQVY7QUFBZ0JDLFdBQU8sRUFBRTtBQUF6QixHQUF4QjtBQUNBbkgsVUFBUSxDQUFDb0gsZ0JBQVQsQ0FBMEIsV0FBMUIsRUFBdUN2QixpQkFBdkMsRUFBMERvQixlQUExRDtBQUNBakgsVUFBUSxDQUFDb0gsZ0JBQVQsQ0FBMEIsVUFBMUIsRUFBc0NsQixnQkFBdEMsRUFBd0RlLGVBQXhEO0FBQ0FqSCxVQUFRLENBQUNvSCxnQkFBVCxDQUEwQixZQUExQixFQUF3Q25CLGtCQUF4QyxFQUE0RGdCLGVBQTVEO0FBQ0QsQ0FsS0Q7O0FBb0tlN0UsNEVBQWYsRSIsImZpbGUiOiJmcm9udGVuZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB3cEFqYXhQcmVsb2FkIGZyb20gJy4vcHJlbG9hZCc7XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuXHJcbiAgY29uc3QgYXBwID0ge1xyXG5cclxuICAgIHByZWxvYWQ6IGA8ZGl2IGlkPVwid3AtYWpheC1wcmVsb2FkXCIgc3R5bGU9XCJwb3NpdGlvbjogZml4ZWQ7d2lkdGg6IDEwMCU7aGVpZ2h0OiAxMDAlO2JhY2tncm91bmQ6IHJnYmEoMCwwLDAsIC41KTtkaXNwbGF5OiBmbGV4O2FsaWduLWl0ZW1zOiBjZW50ZXI7anVzdGlmeS1jb250ZW50OiBjZW50ZXI7ei1pbmRleDogOTk5OTtcIj48aW1nIHNyYz1cIiR7d3BBamF4LnBsdWdpbl91cmx9L2Fzc2V0cy9pbWFnZXMvcHJlbG9hZC5naWZcIiBzdHlsZT1cIndpZHRoOiAxMDBweDtcIj48L2Rpdj5gLFxyXG5cclxuICAgIGluaXQ6ICgpID0+IHtcclxuICAgICAgYXBwLmhpZGVQcmVsb2FkKCk7XHJcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdhOm5vdChbaHJlZl49XCIjXCJdKScsIGFwcC5oYW5kbGVDbGljayk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogaGFuZGxlIHRoZSBsaW5rIGNsaWNrXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVcclxuICAgICAqL1xyXG4gICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICBjb25zdCB1cmwgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcclxuXHJcbiAgICAgIGlmIChhcHAuaXNFeHRlcm5hbCh0aGlzKSkge1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy93cC1hZG1pbi8nKSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFwcC5nZXRQYWdlKHVybCk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIGdldCB0aGUgcGFnZSBjb250ZW50IGJ5IGFqYXggcmVxdWVzdFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1cmxcclxuICAgICAqIEBwYXJhbSByZXBsYWNlVVJMXHJcbiAgICAgKi9cclxuICAgIGdldFBhZ2U6ICh1cmwsIHJlcGxhY2VVUkwgPSB0cnVlKSA9PiB7XHJcbiAgICAgIGFwcC5zaG93UHJlbG9hZCgpO1xyXG5cclxuICAgICAgJC5nZXQodXJsLCAocmVzcG9uc2UpID0+IHtcclxuXHJcbiAgICAgICAgcmVzcG9uc2UgPSByZXNwb25zZS5yZXBsYWNlKC8oPFthLXpBLVpdKz58Lio/W14/XT4pLywgYCQxICR7YXBwLnByZWxvYWR9YCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld0RvYyA9IGRvY3VtZW50Lm9wZW4oXCJ0ZXh0L2h0bWxcIiwgXCJyZXBsYWNlXCIpO1xyXG4gICAgICAgIG5ld0RvYy53cml0ZShyZXNwb25zZSk7XHJcbiAgICAgICAgbmV3RG9jLmNsb3NlKCk7XHJcblxyXG4gICAgICAgIGlmIChyZXBsYWNlVVJMKSB7XHJcbiAgICAgICAgICBhcHAucmVwbGFjZVVSTCh1cmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0pLmZhaWwoKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIGFwcC5oaWRlUHJlbG9hZCgpO1xyXG4gICAgICAgIGFsZXJ0KCdPb3BzISBBSkFYIEVycm9yJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgYWpheCBwcmVsb2FkZXIgaW1hZ2VcclxuICAgICAqL1xyXG4gICAgc2hvd1ByZWxvYWQ6ICgpID0+IHtcclxuICAgICAgaWYgKCQoJyN3cC1hamF4LXByZWxvYWQnLCAkKGRvY3VtZW50KSkubGVuZ3RoKSB7XHJcbiAgICAgICAgJCgnI3dwLWFqYXgtcHJlbG9hZCcsICQoZG9jdW1lbnQpKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnYm9keScpLnByZXBlbmQoYXBwLnByZWxvYWQpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogaGlkZSBhamF4IHByZWxvYWRlciBpbWFnZVxyXG4gICAgICovXHJcbiAgICBoaWRlUHJlbG9hZDogKCkgPT4ge1xyXG4gICAgICAkKCcjd3AtYWpheC1wcmVsb2FkJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIGNoZWNrIHdoZXRoZXIgdGhlIGxpbmsgaXMgZXh0ZXJuYWwgb3Igbm90XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxpbmtcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBpc0V4dGVybmFsOiBmdW5jdGlvbiAobGluaykge1xyXG4gICAgICByZXR1cm4gKGxpbmsuaG9zdCAhPT0gd2luZG93LmxvY2F0aW9uLmhvc3QpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlcGxhY2UgYnJvd3NlciB1cmxcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXJsXHJcbiAgICAgKi9cclxuICAgIHJlcGxhY2VVUkw6ICh1cmwpID0+IHtcclxuXHJcbiAgICAgIGlmIChoaXN0b3J5LnB1c2hTdGF0ZSkge1xyXG4gICAgICAgIGNvbnN0IFVSTCA9IHVybC5yZXBsYWNlKC9eLipcXC9cXC9bXlxcL10rLywgJycpO1xyXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSgnJywgJycsIFVSTCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IHVybDtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgfTtcclxuXHJcbiAgd3BBamF4UHJlbG9hZCgpO1xyXG4gIGFwcC5oaWRlUHJlbG9hZCgpO1xyXG4gICQoZG9jdW1lbnQpLnJlYWR5KGFwcC5pbml0KTtcclxuXHJcbiAgLyoqXHJcbiAgICogaGFuZGxlIGJyb3dzZXIgYmFjay8gbmV4dCBuYXZpZ2F0aW9uXHJcbiAgICovXHJcbiAgb25wb3BzdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHVybCA9IGxvY2F0aW9uLmhyZWY7XHJcblxyXG4gICAgYXBwLmdldFBhZ2UodXJsLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxufSkoalF1ZXJ5KTtcclxuXHJcbiIsImNvbnN0IHdwQWpheFByZWxvYWQgPSAoKSA9PiB7XHJcblxyXG4gIGNvbnN0IG1heFJQUyA9IDM7XHJcbiAgY29uc3QgZGVsYXkgPSAwO1xyXG4gIGNvbnN0IGhvdmVyRGVsYXkgPSA1MDtcclxuICBjb25zdCBpZ25vcmVLZXl3b3JkcyA9IFsnL3dwLWFkbWluJywnL3dwLWxvZ2luLnBocCcsJy9jYXJ0JywnL2NoZWNrb3V0JywnYWRkLXRvLWNhcnQnLCdsb2dvdXQnLCcjJywnPycsJy5wbmcnLCcuanBlZycsJy5qcGcnLCcuZ2lmJywnLnN2ZycsJy53ZWJwJ107XHJcblxyXG4gIGNvbnN0IHRvUHJlZmV0Y2ggPSBuZXcgU2V0KCk7XHJcbiAgY29uc3QgYWxyZWFkeVByZWZldGNoZWQgPSBuZXcgU2V0KCk7XHJcblxyXG4gIC8vIENoZWNrIGJyb3dzZXIgc3VwcG9ydCBmb3IgbmF0aXZlICdwcmVmZXRjaCdcclxuICBjb25zdCBwcmVmZXRjaGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblxyXG4gIGNvbnN0IGlzU3VwcG9ydGVkID1cclxuICAgIHByZWZldGNoZXIucmVsTGlzdCAmJlxyXG4gICAgcHJlZmV0Y2hlci5yZWxMaXN0LnN1cHBvcnRzICYmXHJcbiAgICBwcmVmZXRjaGVyLnJlbExpc3Quc3VwcG9ydHMoXCJwcmVmZXRjaFwiKSAmJlxyXG4gICAgd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyICYmXHJcbiAgICBcImlzSW50ZXJzZWN0aW5nXCIgaW4gSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeS5wcm90b3R5cGU7XHJcblxyXG4gIC8vIENoZWNrcyBpZiB1c2VyIGlzIG9uIHNsb3cgY29ubmVjdGlvbiBvciBoYXMgZW5hYmxlZCBkYXRhIHNhdmVyXHJcbiAgY29uc3QgaXNTbG93Q29ubmVjdGlvbiA9XHJcbiAgICBuYXZpZ2F0b3IuY29ubmVjdGlvbiAmJlxyXG4gICAgKG5hdmlnYXRvci5jb25uZWN0aW9uLnNhdmVEYXRhIHx8XHJcbiAgICAgIChuYXZpZ2F0b3IuY29ubmVjdGlvbi5lZmZlY3RpdmVUeXBlIHx8IFwiXCIpLmluY2x1ZGVzKFwiMmdcIikpO1xyXG5cclxuICAvLyBEb24ndCBzdGFydCBwcmVsb2FkaW5nIGlmIHVzZXIgaXMgb24gYSBzbG93IGNvbm5lY3Rpb24gb3Igbm90IHN1cHBvcnRlZFxyXG4gIGlmIChpc1Nsb3dDb25uZWN0aW9uIHx8ICFpc1N1cHBvcnRlZCkgcmV0dXJuO1xyXG5cclxuICAvLyBQcmVmZXRjaCB0aGUgZ2l2ZW4gdXJsIHVzaW5nIG5hdGl2ZSAncHJlZmV0Y2gnLiBGYWxsYmFjayB0byAneGhyJyBpZiBub3Qgc3VwcG9ydGVkXHJcbiAgY29uc3QgcHJlZmV0Y2ggPSB1cmwgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYGxpbmtgKTtcclxuICAgIGxpbmsucmVsID0gYHByZWZldGNoYDtcclxuICAgIGxpbmsuaHJlZiA9IHVybDtcclxuICAgIGxpbmsub25sb2FkID0gcmVzb2x2ZTtcclxuICAgIGxpbmsub25lcnJvciA9IHJlamVjdDtcclxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIFByZWZldGNoIHBhZ2VzIHdpdGggYSB0aW1lb3V0XHJcbiAgY29uc3QgcHJlZmV0Y2hXaXRoVGltZW91dCA9IHVybCA9PiB7XHJcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gc3RvcFByZWxvYWRpbmcoKSwgNTAwMCk7XHJcbiAgICBwcmVmZXRjaCh1cmwpLmNhdGNoKCgpID0+IHN0b3BQcmVsb2FkaW5nKCkpLmZpbmFsbHkoKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgYWRkVXJsVG9RdWV1ZSA9ICh1cmwsIHByb2Nlc3NJbW1lZGlhdGVseSA9IGZhbHNlKSA9PiB7XHJcblxyXG4gICAgaWYgKGFscmVhZHlQcmVmZXRjaGVkLmhhcyh1cmwpIHx8IHRvUHJlZmV0Y2guaGFzKHVybCkpIHJldHVybjtcclxuXHJcbiAgICAvLyBQcmV2ZW50IHByZWxvYWRpbmcgM3JkIHBhcnR5IGRvbWFpbnNcclxuICAgIGNvbnN0IG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XHJcbiAgICBpZiAodXJsLnN1YnN0cmluZygwLCBvcmlnaW4ubGVuZ3RoKSAhPT0gb3JpZ2luKSByZXR1cm47XHJcblxyXG4gICAgLy8gUHJldmVudCBjdXJyZW50IHBhZ2UgZnJvbSBwcmVsb2FkaW5nXHJcbiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYgPT09IHVybCkgcmV0dXJuO1xyXG5cclxuICAgIC8vIElnbm9yZSBrZXl3b3JkcyBpbiB0aGUgYXJyYXksIGlmIG1hdGNoZWQgdG8gdGhlIHVybFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZ25vcmVLZXl3b3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAodXJsLmluY2x1ZGVzKGlnbm9yZUtleXdvcmRzW2ldKSkgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIG1heCBSUFMgaXMgMCBvciBpcyBvbiBtb3VzZSBob3ZlciwgcHJvY2VzcyBpbW1lZGlhdGVseSAod2l0aG91dCBxdWV1ZSlcclxuICAgIGlmIChwcm9jZXNzSW1tZWRpYXRlbHkpIHtcclxuICAgICAgcHJlZmV0Y2hXaXRoVGltZW91dCh1cmwpO1xyXG4gICAgICBhbHJlYWR5UHJlZmV0Y2hlZC5hZGQodXJsKTtcclxuICAgIH0gZWxzZSB0b1ByZWZldGNoLmFkZCh1cmwpO1xyXG5cclxuICB9O1xyXG5cclxuICAvLyBPYnNlcnZlIHRoZSBsaW5rcyBpbiB2aWV3cG9ydCwgYWRkIHVybCB0byBxdWV1ZSBpZiBmb3VuZCBpbnRlcnNlY3RpbmdcclxuICBjb25zdCBsaW5rc09ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4ge1xyXG4gICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcclxuICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gZW50cnkudGFyZ2V0LmhyZWY7XHJcbiAgICAgICAgYWRkVXJsVG9RdWV1ZSh1cmwsICFtYXhSUFMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gUXVldWUgdGhhdCBwcm9jZXNzIHJlcXVlc3RzIGJhc2VkIG9uIG1heCBSUFMgKHJlcXVlc3RzIHBlciBzZWNvbmQpXHJcbiAgY29uc3Qgc3RhcnRRdWV1ZSA9ICgpID0+XHJcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIEFycmF5LmZyb20odG9QcmVmZXRjaClcclxuICAgICAgICAuc2xpY2UoMCwgbWF4UlBTKVxyXG4gICAgICAgIC5mb3JFYWNoKHVybCA9PiB7XHJcbiAgICAgICAgICBwcmVmZXRjaFdpdGhUaW1lb3V0KHVybCk7XHJcbiAgICAgICAgICBhbHJlYWR5UHJlZmV0Y2hlZC5hZGQodXJsKTtcclxuICAgICAgICAgIHRvUHJlZmV0Y2guZGVsZXRlKHVybCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCAxMDAwKTtcclxuXHJcbiAgbGV0IGhvdmVyVGltZXIgPSBudWxsO1xyXG5cclxuICAvLyBBZGQgVVJMIHRvIHF1ZXVlIG9uIG1vdXNlIGhvdmVyLCBhZnRlciB0aW1lb3V0XHJcbiAgY29uc3QgbW91c2VPdmVyTGlzdGVuZXIgPSBldmVudCA9PiB7XHJcbiAgICBjb25zdCBlbG0gPSBldmVudC50YXJnZXQuY2xvc2VzdChcImFcIik7XHJcbiAgICBpZiAoZWxtICYmIGVsbS5ocmVmICYmICFhbHJlYWR5UHJlZmV0Y2hlZC5oYXMoZWxtLmhyZWYpKSB7XHJcbiAgICAgIGhvdmVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBhZGRVcmxUb1F1ZXVlKGVsbS5ocmVmLCB0cnVlKTtcclxuICAgICAgfSwgaG92ZXJEZWxheSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gUHJlbG9hZCBvbiB0b3VjaHN0YXJ0IG9uIG1vYmlsZVxyXG4gIGNvbnN0IHRvdWNoU3RhcnRMaXN0ZW5lciA9IGV2ZW50ID0+IHtcclxuICAgIGNvbnN0IGVsbSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiYVwiKTtcclxuICAgIGlmIChlbG0gJiYgZWxtLmhyZWYgJiYgIWFscmVhZHlQcmVmZXRjaGVkLmhhcyhlbG0uaHJlZikpXHJcbiAgICAgIGFkZFVybFRvUXVldWUoZWxtLmhyZWYsIHRydWUpO1xyXG4gIH07XHJcblxyXG4gIC8vIENsZWFyIHRpbWVvdXQgb24gbW91c2Ugb3V0IGlmIG5vdCBhbHJlYWR5IHByZWxvYWRlZFxyXG4gIGNvbnN0IG1vdXNlT3V0TGlzdGVuZXIgPSBldmVudCA9PiB7XHJcbiAgICBjb25zdCBlbG0gPSBldmVudC50YXJnZXQuY2xvc2VzdChcImFcIik7XHJcbiAgICBpZiAoZWxtICYmIGVsbS5ocmVmICYmICFhbHJlYWR5UHJlZmV0Y2hlZC5oYXMoZWxtLmhyZWYpKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dChob3ZlclRpbWVyKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBGYWxsYmFjayBmb3IgcmVxdWVzdElkbGVDYWxsYmFjayBodHRwczovL2Nhbml1c2UuY29tLyNzZWFyY2g9cmVxdWVzdElkbGVDYWxsYmFja1xyXG4gIGNvbnN0IHJlcXVlc3RJZGxlQ2FsbGJhY2sgPVxyXG4gICAgd2luZG93LnJlcXVlc3RJZGxlQ2FsbGJhY2sgfHxcclxuICAgIGZ1bmN0aW9uIChjYikge1xyXG4gICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XHJcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYih7XHJcbiAgICAgICAgICBkaWRUaW1lb3V0OiBmYWxzZSxcclxuICAgICAgICAgIHRpbWVSZW1haW5pbmc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIDUwIC0gKERhdGUubm93KCkgLSBzdGFydCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LCAxKTtcclxuICAgIH07XHJcblxyXG4gIC8vIFN0b3AgcHJlbG9hZGluZyBpbiBjYXNlIHNlcnZlciBpcyByZXNwb25kaW5nIHNsb3cvZXJyb3JzXHJcbiAgY29uc3Qgc3RvcFByZWxvYWRpbmcgPSAoKSA9PiB7XHJcbiAgICAvLyBGaW5kIGFsbCBsaW5rcyBhcmUgcmVtb3ZlIGl0IGZyb20gb2JzZXJ2ZXIgKHZpZXdwb3J0KVxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImFcIikuZm9yRWFjaChlID0+IGxpbmtzT2JzZXJ2ZXIudW5vYnNlcnZlKGUpKTtcclxuXHJcbiAgICAvLyBDbGVhciBwZW5kaW5nIGxpbmtzIGluIHF1ZXVlXHJcbiAgICB0b1ByZWZldGNoLmNsZWFyKCk7XHJcblxyXG4gICAgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmb3IgbW91c2UgaG92ZXIgYW5kIG1vYmlsZSB0b3VjaFxyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBtb3VzZU92ZXJMaXN0ZW5lciwgdHJ1ZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgbW91c2VPdXRMaXN0ZW5lciwgdHJ1ZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0b3VjaFN0YXJ0TGlzdGVuZXIsIHRydWUpO1xyXG4gIH07XHJcblxyXG4gIC8vIFN0YXJ0IFF1ZXVlXHJcbiAgc3RhcnRRdWV1ZSgpO1xyXG5cclxuICAvLyBTdGFydCBwcmVsb2FkaW5nIGxpbmtzIGluIHZpZXdwb3J0IG9uIGlkbGUgY2FsbGJhY2ssIHdpdGggYSBkZWxheVxyXG4gIHJlcXVlc3RJZGxlQ2FsbGJhY2soKCkgPT5cclxuICAgIHNldFRpbWVvdXQoKCkgPT5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiYVwiKS5mb3JFYWNoKGUgPT4gbGlua3NPYnNlcnZlci5vYnNlcnZlKGUpKSwgZGVsYXkgKiAxMDAwXHJcbiAgICApXHJcbiAgKTtcclxuXHJcbiAgLy8gQWRkIGV2ZW50IGxpc3RlbmVycyB0byBkZXRlY3QgbW91c2UgaG92ZXIgYW5kIG1vYmlsZSB0b3VjaFxyXG4gIGNvbnN0IGxpc3RlbmVyT3B0aW9ucyA9IHtjYXB0dXJlOiB0cnVlLCBwYXNzaXZlOiB0cnVlfTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIG1vdXNlT3Zlckxpc3RlbmVyLCBsaXN0ZW5lck9wdGlvbnMpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBtb3VzZU91dExpc3RlbmVyLCBsaXN0ZW5lck9wdGlvbnMpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRvdWNoU3RhcnRMaXN0ZW5lciwgbGlzdGVuZXJPcHRpb25zKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHdwQWpheFByZWxvYWQ7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=